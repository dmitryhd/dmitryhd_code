<?xml version="1.0" encoding="koi8-r"?>
<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.1//EN"
	 "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=koi8-r" />
<title>Fast SMB Search FAQ</title>
<link rel="stylesheet" href="/style.css" />
</head>
<body>
<h1>Fast SMB Search</h1>

<h3>Общие вопросы</h3>
<p><a id="what-is" /><b>Q</b>. Что такое Fast SMB Search?<br />
<b>A</b>. <b>Fast SMB Search</b> - система поиска файлов по сети. С помощью Fast SMB Search вы можете:</p>
<ul>
<li>искать файлы по названию (а также по размеру, типу, и др)</li>
<li>просматривать содержимое сети</li>
<li>получать различную информацию о сети (какие в данный момент компьютеры включены, их IP адреса)</li>
<li>просматривать статистику по компьютерам (как и суммарную, так и по различных типам файлов)</li>
</ul>
<p><b>Q</b>. Как использовать Fast SMB Search?<br />
<b>A</b>. Для того, что бы зайти на Fast SMB Search вам нужен обычный Web-browser.
Лучше всего подойдет Internet Explorer или Konqueror (система оптимизирована
для них). Запустите ваш любимый браузер и введите в строке адреса 
<a href="http://lorien.local/">http://lorien.local/</a>.
Вы попадете на заглавную страницу.
</p>
<p><a id="how-to-start" /><b>Q</b>. Как искать?<br />
<b>A</b>. Для начала попробуйте простой поиск. Зайдите на заглавную страницу, в
строке поиска введите несколько слов, разделенных пробелами, и нажмите кнопку
Search. Вам выведут все файлы, в названии которых есть эти слова. Регистр букв
и порядок слов не важен. Например, поиск по словам <b>"Pin"</b> и <b>"loYd"</b>
(без кавычек) найдет файлы <b>"Pink Floyd - 01.mp3"</b>, <b>"Floyd
Pink.jpg"</b> и <b>"pinloyd.txt"</b>. Не ищите выражения типа *.avi, так как в
этом случае вы будете искать все файлы, название которых содержит подстроку
*.avi (а таких нет, так как * является запрещенными символом в имени файла
в большинстве операционных систем).
Если вам нужно найти фильм или музыку, зайдите на список фильмов или
воспользуйтесь расширенным поиском (см. следующий вопрос).
</p>
<p><a id="advanced" /><b>Q</b>. Какие варианты поиска доступны? Что такое расширенный поиск и как его использовать?<br />
<b>A</b>. Зайдите на заглавную страницу и тыкните по ссылке
<a href="http://lorien.local/advanced.pl">Advanced Search</a>. Вы увидите форму
расширенного поиска, где можете более детально указать критерии поиска.
Сверху вниз по странице:</p>
<ul>
<li><b>Строка поиска</b>. Здесь нужно указать список слов (точно также как и при простом
поиске). Будут выведены файлы, в названии которых есть все заданные слова
(порядок слов и регистр букв не важен).</li>
<li><b>Искать в найденном</b>. Если поставить эту галочку, то поиск будет осуществляться
среди не всех файлов, а тех, которые были найдены в предыдущем поиске. Если вы заходите
на страницу не со страницы поиска (то есть предыдущего поиска нет), то эта галочка
игнорируется.</li>
<li><b>Тип ресурса</b>. Укажите желаемый тип файла. Доступны следующие типы:
фильмы, клипы, музыка, тексты, картинки, файлы, характерные только для Unix,
образы дисков. Если вы не хотите вводить ограничение по типу файла, укажите All files.</li>
<li><b>Размер</b>. Введите минимальный и максимальный размер. Можно указать
только один или оба. Если вы оставите поле пустым - размер не будет
ограничиваться сверху (или снизу). Если вы не хотите ограничение по размеру,
оставьте оба поля пустыми.</li>
<li><b>Показ файлов/каталогов</b>. Укажите, что вы хотите видеть в результатах
поиска (файлы, каталоги, или и то, и другое).</li>
<li><b>Порядок сортировки</b>. Здесь можно указать желаемый порядок, по которому будут сортироваться
результаты поиска. Можно указать три параметра, сначала будет проводиться
сортировка по первому параметру, затем по второму итд. Доступны следующие варианты:
имя машины (host name), статус машины (включена/выключена, host status), рабочая группа в сети (workgroup),
хост (по алфавиту + статус, host), каталоги и файлы отдельно (file/dir),
путь (относительно машины, path), имя файла (name), размер (size).
Значение nosort соотвествует исходному порядку файлов без сортировки.
Поставив галочку inverse можно поменять направление сортировки: по возрастанию или по убыванию.</li>
<li><b>Файлов на странице</b>. Можно указать желаемое число файлов, выводимых на одну страницу. При большем
числе, результаты поиска разбиваются на страницы, в них добавляются ссылки для навигации между ними. На одной
странице можно вывести не более 1000 результатов.</li>
</ul>
<p>Обычный поиск реализован как расширенный со значениями по умолчанию (то есть
он работает также, как расширенный с этими параметрами).
Если вы хотите видеть еще какие-то варианты поиска,
пишите мне (см. ниже).
</p>
<p><a id="features" /><b>Q</b>. В чем отличия с обычными средствами типа встроенного в винду
поиска?<br />
<b>A</b>. Есть несколько преимуществ: </p>
<ul>
<li>Собственно поиск. Средний поиск занимает порядка 0.8 секунд, что значительно быстрее,
чем поиск по 5 млн. файлов вручную.</li>
<li>Работает без зависаний. Если компьютер, на который вы пытались зайти выключен, то
винда подвиснет на некоторое время (~15 секунд), здесь такого не происходит.</li>
<li>База генерируется инкрементно (т.е. не каждый раз с нуля, а данные о
компьютерах накапливаются). Если компьютер был выключен во время генерации, но
он есть в базе, данные о нем сохранятся. Вы можете разглядывать содержимое
компьютеров, которые выключены.</li>
<li>Показывается текущее состояние компьютеров (какие включены, какие
выключены). При частых проблемах с Master Browser это весьма актуально.</li>
<li>Возможность видеть размер каталога, не подсчитывая его - иногда бывает очень полезно (например,
при поиске музыкальных альбомов).</li>
<li>Гибкие возможности сортировки.</li>
</ul>
<p><a id="from-inet" /><b>Q</b>. Можно ли использовать Fast SMB Search из Интернета?<br />
<b>A</b>. Да, можно. Зайдите на 
<a href="http://lorien.s2s.msu.ru/">http://lorien.s2s.msu.ru/</a>.
Иногда этот адрес не доступен, это может быть вызвано проблемами
с доступом в Интернет у меня. К счастью, это бывает довольно редко.
</p>
<p><a id="film-list" /><b>Q</b>. Я слышал про какой-то список фильмов? Где это и что это?<br />
<b>A</b>. Раньше, кроме файлового поиска, здесь также был сервис по
поиску фильмов в сети. Помимо самих имен файлов, там также можно 
было найти информацию о жанре, актерах. Некоторое время он успешно
существовал, однако, вскоре у меня перестало хватать времени на его
поддержание. Как следствие, список начал быстро засоряться (машина
не в состоянии &quot;понимать&quot;, какие фильмы разные, а какие одинаковые,
например, когда один из файлов имеет русское название, а другой английское).
После этого в сети появился сайт <a href="http://z80.hackers/">Z80</a>, на
котором располагался альтернативный список фильмов, созданный талантливыми
разработчиками под руководством DarkGray. Вскоре этот ресурс по функциональности
обогнал поиск фильмов (были добавлены такие фичи, как оценки фильмов, поиск
по актеру, режиссеру, фильтрация по жанрам и т.д.). В связи с появлением этого
сайта я счел нецелесообразным поддерживать свой список фильмов и убрал его.
Если вы хотите найти фильм - вам <a href="http://films.hackers/">сюда</a>.
</p>
<h3>Проблемы</h3>
<p><a id="not-work" /><b>Q</b>. Я не могу зайти на Fast SMB Search? В чем дело?<br />
<b>A</b>. Во-первых, проверьте, есть ли у вас до меня связь. Для этого наберите
<b>ping 172.16.16.100</b>. Если ответа нет - значит и Fast SMB Search вам не видать.
Мой компьютер включен почти всегда, так что отсутствие ping-ов говорит, скорее
всего, о проблемах с сетью.
Во-вторых, у вас могут быть проблемы с DNS. Для того
чтобы это проверить сделайте: <b>nslookup lorien.local</b>. Если вам сказали что "...
can't find...", то вам нужно настроить DNS (укажите в свойствах сетевого
соединения адрес DNS сервера 172.16.0.11). Возможно также, что вы находитесь в
том же сегменте что и я (172.16.16.0/22), и при этом у вас нет связи с DNS
сервером, но есть со мной. Тогда можете попробовать зайти по IP:
<a href="http://172.16.16.100/">http://172.16.16.100/</a> - только вряд ли в этом
будет какой-то смысл (все равно при этом, ни мне, ни вам не будет видна
основная часть сети).
</p>
<p><a id="lorien-bug" /><b>Q</b>. ping lorien работает, но я все равно не вижу Fast SMB Search! Что
делать?<br /> <b>A</b>. Иногда на моем компьютере производятся технические
работы (установка нового оборудования, нового ядра, и т.п.). Наиболее частая
причина неработоспособности - производится апгрейд движка поисковой системы.
Иногда в процессе разработки допускаются различные ошибки, если в этот момент
попытаться зайти на поиск, то можно увидеть разнообразные сообщения об ошибках,
наиболее типичным из которых является "cannot open connection to fsearch server".
Если вы увидели такое сообщение, попробуйте зайти на поиск через минуту, или две,
скорее всего все будет работать. Если ошибка повторяется в течении
продолжительного времени (например, полчаса), сообщите об этом по почте на
адрес <a href="mailto:alex@sectorb.msk.ru">alex@sectorb.msk.ru</a>
</p>
<p><a id="not-indexing" /><b>Q</b>. У меня расшарено много файлов, но мой компьютер не видно в поиске. В чем дело?<br />
<b>A</b>. Это может быть вызвано сотней различных причин. Вот некоторые, наиболее часто встречающиеся:</p>
<ol>
<li>Для начала убедитесь, что вы есть в DNS (оттуда берется информация о имеющихся компьютерах,
их названиях и IP-адресах). Проверить это можно набрав с <b>другого</b> компьютера команду
<b>ping &lt;имя_компьютера.доменное_имя_сети&gt;</b>. Например, если ваш компьютер называется mycomp
и находится в сети MSU, то это будет <b>ping mycomp.local</b> (local - доменное имя сети MSU).
Если в ответ вы должны увидеть нечто подобное:
<pre>
64 bytes from mycomp.local (172.16.12.345): icmp_seq=1 ttl=64 time=0.568 ms
64 bytes from mycomp.local (172.16.12.345): icmp_seq=2 ttl=64 time=0.412 ms
</pre>
Если вместо этого выдается сообщение наподобие
<pre>
ping: unknown host mycomp.local
</pre>
то это означает, что ваша машина не прописана в DNS. Свяжите с
администраторами вашей сети и попросите их добавить их в базу DNS. В дальнейшем
предполагается, что DNS настроен и корректно работает.</li>
<li>Убедитесь, что у вас корректно настроена маршрутизация. Попробуйте попинговать lorien.local, phoenix.local,
server.hackers. Довольно частой проблемой является отсутствие постоянных маршрутов на внутренние
подсети, что приводит к тому, что при &quot;выключенном&quot; интернете локальную сеть видно, а при 
&quot;включенном&quot; - не видно. Проверьте это, пропингав lorien.local при включенном и выключенном
интернете. Процесс настройки маршрутизации подробно описан на <a href="http://forum.local/ubbthreads.php">форуме</a>,
а также на специальных сайтах (например, для сети MSU - <a href="http://net.info.local/settings/">http://net.info.local/settings/</a>).
</li>
<li>Проверьте, что у вас установлено и работает программное обеспечение, необходимое для того, чтобы
ресурсы вашего компьютера были видны в сети. Для ОС Windows - должна быть запущена служба Server (в русской
версии - Сервер). В UNIX-подобных ОС должна быть установлена Samba.</li>
<li>Проверьте, что на ваш компьютер можно зайти с других под сетей. Например, в случае Linux-cистем,
в кофигурационном файле /etc/samba/smb.conf должна присутсвовать строка наподобие
<pre>hosts allow = 172.16. 10.</pre>
в которой явно описан список подсетей, с которых можно заходить на вашу машину.</li>
<li>Проверьте, что доступ на порты 137, 138, 139, 445 не закрыт фаирволлом. Я слышал,
что некоторое время назад в сети HACKERS наблюдались какие-то проблемы с трафиком по 445 порту, уточните
этот вопрос у администраторов сети.</li>
<li>Проверьте, что у вас разрешен доступ пользователю Guest (Гость). В системах типа Windows NT/2000/XP
этот пользователь должен быть разрешен (снята галочка &quot;Account is disable&quot;).</li>
<li>Еще иногда попадаются случаи, когда у пользователя расшарены файлы с совершенно патологическими
названиями, содержащими странные непечатные буквы. Обычно таких файлов не бывает и они появляются
в результате порчи файловой системы. Сканнер воспринимает такие файлы как ошибки и
не индексирует компьютер. В таком случае вылечите компьютер утилитой типа scandisk, chkdisk, fsck (в
зависимости от используемой ОС) и переименуйте (или удалите) все файлы с такими страшными названиями.</li>
<li>Если ничего из вышеприведенного не помогает, попробуйте написать мне по почте на
<a href="mailto:alex@sectorb.msk.ru">alex@sectorb.msk.ru</a> - будем разбираться вместе.</li>
</ol>
<h3>Технические вопросы</h3>
<p><a id="how-works" /><b>Q</b>. Как все это работает?<br />
<b>Q</b>. Как часто обновляется база? <br />
<b>A</b>. Внутреннее устройство детально описано <a href="internals.html">здесь</a>.
</p>
<p><a id="total-size" /><b>Q</b>. Каков общий объем базы? Сколько всего компьютеров? Каков общий объем файлов? Как насчет Top10?<br />
<b>A</b>. Статистика находится <a href="stat.pl">здесь</a>. Там есть как и
общая статистика, так и статистика по отдельным типам ресурсов. Статистика
подсчитывается во время сканирования, а не отдельно (периодичность обновления
см. выше). На текущий момент объем составлял примерно <b>15000 Gb</b>.
Компьютеры перечислены в порядке убывания объема расшаренных файлов, первые 3
места выделяются жирным шрифтом. Компьютеры, на которых ничего не расшарены не
перечислены. Каждый компьютер представляет собой ссылку, тыкнув на которую, вы
можете узнать какие на нем лежат файлы, включен ли он сейчас, когда его
последний раз сканировали и другие параметры.
</p>
<p><a id="browser" /><b>Q</b>. Какой браузер можно использовать?<br />
<b>A</b>. Теоретически любой. Я постарался сделать наиболее простой HTML для
расширения совместимости и максимальной скорости работы. Сайт сделан так,
что все его функции можно полностью использовать даже из текстового браузера
lynx. Единственная проблема, что ссылки на виндовые шары понимают только 2
известных мне браузера. Это Internet Explorer (в формате \\HOST\Share\file) и
Konqueror (в формате smb://HOST/Share/file). Если у вас есть еще какой-то
браузер понимающий ссылки в другом формате, напишите мне, я добавлю его
поддержку.
</p>
<p><a id="software" /><b>Q</b>. Какое программное обеспечение используется?<br />
<b>A</b>. Операционная система Debian GNU/Linux (unstable).
На момент написания FAQ на машине работает: Linux kernel 2.6.7, web-сервер Apache 1.3.31,
SQL-сервер MySQL 4.0.20, Perl 5.8, Samba 3.0.5.
</p>
<p><a id="give-me" /><b>Q</b>. У меня дома похожая сеть. Хочу установить себе такую же систему.
Возможно ли это сделать?<br />
<b>A</b>. Все исходники открыты и распространяются по лицензии GPL
(<a href="http://www.gnu.org/licenses/gpl.html">GNU Public License</a>).
Однако, вся система устроена очень сложно, <b>крайне</b> настоятельно рекомендуется прочитать
<a href="install.html">Installation Guide</a>.
</p>
<p><a id="bug" /><b>Q</b>. Мне кажется, я нашел глюк/Что-то работает неправильно. Куда написать?<br />
<b>A</b>. Если вам кажется, что вы нашли глюк и или у вас есть какие-то
предложения по улучшению системы, пишите мылом.  Можете также придти лично в
Б-1437 (прав) если вам не лень. Пожалуйста, во всех случаях указывайте время
поиска, ваш IP, что вы искали и что произошло. Учтите, что все находится в
стадии тестирования и может глючить.  <b>Убедительная просьба</b> сообщать мне
случаи, если в базе хранится неправильная информация о <b>вашем</b> компьютере
(или он не попал в базу).
</p>
<h3>Разное</h3>
<p><a id="lorien" /><b>Q</b>. Что означает название <b>Lorien</b>, откуда оно взялось?<br />
<b>A</b>. Это из Толкиена, так называлось одно очень красивое место в Валиноре.
За подробностями смотрите <b>Silmarillion</b> (можно найти
<a href="/pub/docs/books/Tolkien/silm6.htm#lorien">здесь</a>). <b>Lorien</b> - в
переводе с эльфийского означает <b>мечта</b> (dream).
</p>
<p><a id="about" /><b>Q</b>. Где это находится и кто это сделал?<br />
<b>A</b>. В данный момент Fast SMB Search находится на lorien.local (172.16.16.100),
Б-865 ГЗ МГУ.  Систему написал Sasha (Alexander Vodomerov).</p>
<hr />
<p><b>Fast SMB Search</b> is written by Sasha, write to
<a href="mailto:alex@sectorb.msk.ru">alex@sectorb.msk.ru</a></p>
</body></html>
